{"ast":null,"code":"var _jsxFileName = \"/Users/domsardina/Development/nfinite-test/client/src/pages/PageTwo.jsx\",\n    _s = $RefreshSig$();\n\nimport { useEffect, useState } from 'react';\nimport { Table, TableBody, TableContainer, Paper } from '@mui/material/';\nimport SuccessRow from '../components/SuccessRow';\nimport ErrorRow from '../components/ErrorRow';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nconst PageTwo = ({\n  data = []\n}) => {\n  _s();\n\n  const [rows, setRows] = useState();\n\n  const processUrl = async src => {\n    var result = await fetch(src);\n    console.log('result', result);\n\n    if (result.ok) {\n      return true;\n    }\n\n    return false;\n  };\n\n  const processImage = async src => {\n    let img;\n    const imageLoadPromise = new Promise(resolve => {\n      img = new Image();\n      img.onload = resolve;\n      img.src = src;\n    });\n    await imageLoadPromise;\n    console.log('onload', img.width);\n    return {\n      width: img.width,\n      height: img.height\n    };\n  };\n\n  const createRow = row => {\n    if (row.width && row.width !== 0) {\n      return /*#__PURE__*/_jsxDEV(SuccessRow, {\n        row: row\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 36,\n        columnNumber: 14\n      }, this);\n    }\n\n    return /*#__PURE__*/_jsxDEV(ErrorRow, {\n      row: row\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 38,\n      columnNumber: 12\n    }, this);\n  };\n\n  const aggregateData = async () => {\n    const mergedData = await Promise.all(data.map(async row => {\n      const isValidUrl = await processUrl(row.url);\n\n      if (isValidUrl) {\n        const dimensions = await processImage(row.url);\n        return { ...row,\n          width: dimensions.width,\n          height: dimensions.height\n        };\n      } else {\n        return { ...row,\n          width: 0,\n          height: 0\n        };\n      }\n    }));\n    setRows(mergedData);\n  };\n\n  useEffect(() => {\n    aggregateData(); // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, []);\n  return /*#__PURE__*/_jsxDEV(TableContainer, {\n    component: Paper,\n    children: /*#__PURE__*/_jsxDEV(Table, {\n      sx: {\n        minWidth: 650,\n        maxWidth: 800,\n        margin: '0 auto'\n      },\n      \"aria-label\": \"simple table\",\n      children: /*#__PURE__*/_jsxDEV(TableBody, {\n        children: rows && rows.map(row => createRow(row))\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 67,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 63,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 62,\n    columnNumber: 5\n  }, this);\n};\n\n_s(PageTwo, \"cMn46HMmfsVf4gpe7bT6j+QWbN0=\");\n\n_c = PageTwo;\nexport default PageTwo;\n\nvar _c;\n\n$RefreshReg$(_c, \"PageTwo\");","map":{"version":3,"sources":["/Users/domsardina/Development/nfinite-test/client/src/pages/PageTwo.jsx"],"names":["useEffect","useState","Table","TableBody","TableContainer","Paper","SuccessRow","ErrorRow","PageTwo","data","rows","setRows","processUrl","src","result","fetch","console","log","ok","processImage","img","imageLoadPromise","Promise","resolve","Image","onload","width","height","createRow","row","aggregateData","mergedData","all","map","isValidUrl","url","dimensions","minWidth","maxWidth","margin"],"mappings":"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","sourcesContent":["import { useEffect, useState } from 'react';\nimport { Table, TableBody, TableContainer, Paper } from '@mui/material/';\nimport SuccessRow from '../components/SuccessRow';\nimport ErrorRow from '../components/ErrorRow';\n\nconst PageTwo = ({ data = [] }) => {\n  const [rows, setRows] = useState();\n\n  const processUrl = async (src) => {\n    var result = await fetch(src);\n    console.log('result', result);\n    if (result.ok) {\n      return true;\n    }\n    return false;\n  };\n\n  const processImage = async (src) => {\n    let img;\n    const imageLoadPromise = new Promise((resolve) => {\n      img = new Image();\n      img.onload = resolve;\n      img.src = src;\n    });\n\n    await imageLoadPromise;\n    console.log('onload', img.width);\n    return {\n      width: img.width,\n      height: img.height,\n    };\n  };\n\n  const createRow = (row) => {\n    if (row.width && row.width !== 0) {\n      return <SuccessRow row={row} />;\n    }\n    return <ErrorRow row={row} />;\n  };\n\n  const aggregateData = async () => {\n    const mergedData = await Promise.all(\n      data.map(async (row) => {\n        const isValidUrl = await processUrl(row.url);\n        if (isValidUrl) {\n          const dimensions = await processImage(row.url);\n          return { ...row, width: dimensions.width, height: dimensions.height };\n        } else {\n          return { ...row, width: 0, height: 0 };\n        }\n      })\n    );\n    setRows(mergedData);\n  };\n\n  useEffect(() => {\n    aggregateData();\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, []);\n\n  return (\n    <TableContainer component={Paper}>\n      <Table\n        sx={{ minWidth: 650, maxWidth: 800, margin: '0 auto' }}\n        aria-label=\"simple table\"\n      >\n        <TableBody>{rows && rows.map((row) => createRow(row))}</TableBody>\n      </Table>\n    </TableContainer>\n  );\n};\n\nexport default PageTwo;\n"]},"metadata":{},"sourceType":"module"}